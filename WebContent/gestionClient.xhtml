<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
     xmlns:p="http://primefaces.org/ui">
<!-- cette page indique qu'on utilise les balise h pour html du jsf
et les balise f qui sont des cores -->
<h:head>
    <title>JSF 2.2 Agence location voitures</title>
</h:head>
<h:body background="white">
    <h:form id="jsfexample">
    	<p:panelGrid columns="2" id="myPanelGrid">
            <f:facet name="header">Gestion Client</f:facet>
            <h:outputLabel for="nom" value="Entrez le nom" />
            <p:inputText id="nom" value="#{personneManager.personne.nom}" />
            <h:outputLabel for="prenom" value="Entrez le prÃ©nom" />
            <p:inputText id="prenom" value="#{personneManager.personne.prenom}" />
            <h:outputLabel for="login" value="Entrez le login" />
            <p:inputText id="login" value="#{personneManager.personne.login}" />
            <h:outputLabel for="password" value="Entrez le mot de passe" />
            <p:inputText id="password" value="#{personneManager.personne.password}" />
            <h:outputLabel for="email" value="Entrez l''email" />
            <p:inputText id="email" value="#{personneManager.personne.email}" />
            <p:commandButton action="#{personneManager.save()}" update="mydataClient" value="Save" icon="ui-icon-check" style="margin:0" />
            <p:commandButton action="#{personneManager.edit()}" update="@form" value="Edit" icon="ui-icon-check" style="margin:0" />
			<p:commandButton action="#{personneManager.delete()}" update="mydataClient"
				value="Delete" icon="ui-icon-check" style="margin:0" />
			<h:messages />
        </p:panelGrid>
        <h2>Liste des clients</h2>
        <p:dataTable value="#{personneManager.listClient}" var="item" id="mydataClient"
            selectionMode="single" selection="#{personneManager.personneSelected}" rowKey="#{item.id_personne}">
            <p:ajax event="rowSelect"   listener="#{personneManager.updateToEdit(item)}" update="@form" process="mydataClient" ></p:ajax>
            <p:column>
                <f:facet name="header">nom</f:facet>
                <h:outputText value="#{item.nom}" />
            </p:column>
            <p:column>
                <f:facet name="header">prenom</f:facet>
                <h:outputText value="#{item.prenom}" />
            </p:column>
            <p:column>
                <f:facet name="header">email</f:facet>
                <h:outputText value="#{item.email}" />
            </p:column>
                        <p:column>
                <f:facet name="header">login</f:facet>
                <h:outputText value="#{item.login}" />
            </p:column>
            <p:column>
                <f:facet name="header">password</f:facet>
                <h:outputText value="#{item.password}" />
            </p:column>
        </p:dataTable>
    </h:form>
    <a href="admin.xhtml">Retour admin</a>
</h:body>
</html>